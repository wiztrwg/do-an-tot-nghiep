{"ast":null,"code":"var _jsxFileName = \"D:\\\\Do_An_Tot_Nghiep\\\\my-app\\\\src\\\\components\\\\page\\\\Blog\\\\CommentItem.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport \"./Comment.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CommentItem = ({\n  comment,\n  onReply,\n  onEdit,\n  onDelete,\n  currentUser\n}) => {\n  _s();\n  var _comment$replies;\n  const [replyMode, setReplyMode] = useState(false);\n  const [editMode, setEditMode] = useState(false);\n  const [text, setText] = useState(comment.content);\n  const isOwner = currentUser && currentUser.id === comment.user_id;\n  const isAdmin = currentUser && currentUser.role === \"admin\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comment-item\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: `http://localhost:5000/uploads/avatars/${comment.avatar}`,\n      alt: \"avatar\",\n      className: \"comment-avatar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-body\",\n      children: [!editMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment-bubble\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: comment.userName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: comment.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: text,\n          onChange: e => setText(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onEdit(comment.id, text),\n          children: \"L\\u01B0u\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setEditMode(false),\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => setReplyMode(!replyMode),\n          children: \"Tr\\u1EA3 l\\u1EDDi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this), (isOwner || isAdmin) && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => setEditMode(!editMode),\n            children: \"S\\u1EEDa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => onDelete(comment.id),\n            children: \"X\\xF3a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"comment-time\",\n          children: new Date(comment.createdAt).toLocaleString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), replyMode && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reply-box\",\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"Vi\\u1EBFt ph\\u1EA3n h\\u1ED3i...\",\n          onKeyDown: e => {\n            if (e.key === \"Enter\" && !e.shiftKey) {\n              e.preventDefault();\n              onReply(comment.id, e.target.value);\n              e.target.value = \"\";\n              setReplyMode(false);\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), ((_comment$replies = comment.replies) === null || _comment$replies === void 0 ? void 0 : _comment$replies.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"replies\",\n        children: comment.replies.map(reply => /*#__PURE__*/_jsxDEV(CommentItem, {\n          comment: reply,\n          onReply: onReply,\n          onEdit: onEdit,\n          onDelete: onDelete,\n          currentUser: currentUser\n        }, reply.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentItem, \"ch10xjsaL8fYioBhvUiIpjjZ+PY=\");\n_c = CommentItem;\nexport default CommentItem;\nvar _c;\n$RefreshReg$(_c, \"CommentItem\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","CommentItem","comment","onReply","onEdit","onDelete","currentUser","_s","_comment$replies","replyMode","setReplyMode","editMode","setEditMode","text","setText","content","isOwner","id","user_id","isAdmin","role","className","children","src","avatar","alt","fileName","_jsxFileName","lineNumber","columnNumber","userName","value","onChange","e","target","onClick","Date","createdAt","toLocaleString","placeholder","onKeyDown","key","shiftKey","preventDefault","replies","length","map","reply","_c","$RefreshReg$"],"sources":["D:/Do_An_Tot_Nghiep/my-app/src/components/page/Blog/CommentItem.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./Comment.css\";\r\n\r\nconst CommentItem = ({ comment, onReply, onEdit, onDelete, currentUser }) => {\r\n  const [replyMode, setReplyMode] = useState(false);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [text, setText] = useState(comment.content);\r\n\r\n  const isOwner = currentUser && currentUser.id === comment.user_id;\r\n  const isAdmin = currentUser && currentUser.role === \"admin\";\r\n\r\n  return (\r\n    <div className=\"comment-item\">\r\n      <img\r\n        src={`http://localhost:5000/uploads/avatars/${comment.avatar}`}\r\n        alt=\"avatar\"\r\n        className=\"comment-avatar\"\r\n      />\r\n\r\n      <div className=\"comment-body\">\r\n        {/* Comment bubble */}\r\n        {!editMode ? (\r\n          <div className=\"comment-bubble\">\r\n            <strong>{comment.userName}</strong>\r\n            <p>{comment.content}</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"edit-box\">\r\n            <textarea\r\n              value={text}\r\n              onChange={(e) => setText(e.target.value)}\r\n            ></textarea>\r\n            <button onClick={() => onEdit(comment.id, text)}>Lưu</button>\r\n            <button onClick={() => setEditMode(false)}>Hủy</button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Comment actions */}\r\n        <div className=\"comment-actions\">\r\n          <span onClick={() => setReplyMode(!replyMode)}>Trả lời</span>\r\n\r\n          {(isOwner || isAdmin) && (\r\n            <>\r\n              <span onClick={() => setEditMode(!editMode)}>Sửa</span>\r\n              <span onClick={() => onDelete(comment.id)}>Xóa</span>\r\n            </>\r\n          )}\r\n\r\n          <span className=\"comment-time\">\r\n            {new Date(comment.createdAt).toLocaleString()}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Reply box */}\r\n        {replyMode && (\r\n          <div className=\"reply-box\">\r\n            <textarea\r\n              placeholder=\"Viết phản hồi...\"\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\" && !e.shiftKey) {\r\n                  e.preventDefault();\r\n                  onReply(comment.id, e.target.value);\r\n                  e.target.value = \"\";\r\n                  setReplyMode(false);\r\n                }\r\n              }}\r\n            ></textarea>\r\n          </div>\r\n        )}\r\n\r\n        {/* Render replies */}\r\n        {comment.replies?.length > 0 && (\r\n          <div className=\"replies\">\r\n            {comment.replies.map((reply) => (\r\n              <CommentItem\r\n                key={reply.id}\r\n                comment={reply}\r\n                onReply={onReply}\r\n                onEdit={onEdit}\r\n                onDelete={onDelete}\r\n                currentUser={currentUser}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentItem;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}